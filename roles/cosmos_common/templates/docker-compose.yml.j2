---
services:
  {{ chain.name }}-{{ chain.network }}:
    container_name: {{ chain.name }}-{{ chain.network }}
    image: {{ chain.image }}
    user: "{{ node_uid }}:{{ node_gid }}"
    volumes:
      - {{ dirs.chain_home }}:/data
      - {{ dirs.snapshot }}:/snapshots
      - {{ dirs.backup }}:/backups
      - {{ dirs.chain_home }}/tmp:/tmp/
    entrypoint: "{{ chain_binary }}"
    command: "start --home /data"
    environment:
      - MONIKER={{ node_moniker }}
    ports:
      {{ docker.ports | to_nice_yaml | indent(6) }}
    restart: unless-stopped 