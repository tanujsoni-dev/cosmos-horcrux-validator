---
services:
  {{ chain.name }}-{{ chain.network }}:
    container_name: {{ chain.name }}-{{ chain.network }}
    image: {{ chain.image }}
    user: "root"
    volumes:
      - {{ dirs.chain_home }}:/data
      - {{ dirs.snapshot }}:/snapshots
      - {{ dirs.backup }}:/backups
      - {{ dirs.chain_home }}/tmp:/tmp/
    entrypoint: "{{ chain_binary }}"
    command: "start --home /data"
    environment:
      - MONIKER={{ node_moniker }}
    ports:
      - "0.0.0.0:26656:26656"  # P2P port
      - "0.0.0.0:26657:26657"  # RPC port for Horcrux signers
      - "0.0.0.0:26659:26659"  # gRPC port
      - "0.0.0.0:19901:19901"  # priv_validator_laddr
    restart: unless-stopped 
